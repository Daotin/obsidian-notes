## 背景
vite默认的build打包，会把所有的模块单独打包，形成很多1kb这种小的chunk，但是同一个域名下，网络请求的并发是6个，所以会影响加载的速度。

但，如果打包过于简单（比如只有vendor和index），那么首屏加载时间又会过长，而且无法做到资源缓存（每次contenthash都会变）。





打包优化：
1、首先思考优化的流程，如何一步步优化，而不是死记硬背。不同的场景有不同的配置！

- 通用
	- 打包后的文件名，文件夹分类
	- gzip/br压缩
- 依赖包：
	- 合并
	- 一些不变的模块，单独打成1个包 
	- 外链 rollup-plugin-external-globals，inject自动引入
- 业务代码
	- 根据包的size大小自动拆分
	- 高级玩法：指定某n个模块打包在一起，类似`webpackChunkName`注释功能 ![](images/Pasted%20image%2020250319183054.png) or vite-plugin-webpackchunkname

