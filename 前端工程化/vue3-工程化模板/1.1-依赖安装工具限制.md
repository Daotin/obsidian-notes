> vue项目如何限定依赖只能使用pnpm而不能使用npm或者yarn安装？

## 方式一：使用only-allow包

这是最有效的方法，它会在有人尝试使用npm或yarn时直接中断安装过程。 在package.json中添加preinstall脚本：

```json
{
  "scripts": {
    "preinstall": "npx only-allow pnpm"
  }
}
```

## 方式二（推荐）：配置`.npmrc`文件

在项目根目录创建`.npmrc`文件，设置engine-strict为true：

```
engine-strict=true
```

然后**在package.json中添加engines限制**： 配置engines字段，指定只能使用pnpm：

```json
{
  "engines": {
    "node": ">=16",
    "npm": "请使用pnpm https://pnpm.io/zh/installation",
    "yarn": "请使用pnpm https://pnpm.io/zh/installation",
    "pnpm": ">=8"
  }
}
```

>  `"npm": "请使用pnpm https://pnpm.io/zh/installation"`,  是什么意思？

这是一项巧妙的手法。它并没有指定一个有效的 npm 版本号，而是包含了一条中文信息：“请使用 pnpm”，并附上了 pnpm 安装指南的网址。当有人尝试使用 npm 时，这将会导致版本不匹配错误，并在错误消息中显示上述信息：

```
D:\Gitee\create-vue3-template>npm i
npm error code EBADENGINE
npm error engine Unsupported engine
npm error engine Not compatible with your version of node/npm: create-vue3-template@0.0.1
npm error notsup Not compatible with your version of node/npm: create-vue3-template@0.0.1
npm error notsup Required: {"node":">=16.0.0","npm":"请使用pnpm https://pnpm.io/zh/installation","yarn":"请使用pnpm https://pnpm.io/zh/installation","pnpm":">=8.0.0"}
npm error notsup Actual:   {"npm":"10.8.2","node":"v18.20.6"}
npm error A complete log of this run can be found in: C:\Users\daotin\AppData\Local\npm-cache\_logs\2025-02-27T01_17_32_508Z-debug-0.log
```