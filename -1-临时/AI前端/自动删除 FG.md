我们有一个实践，比较靠谱的，就是自动删除 FG。

FG 就是 feature gating，简单理解就是一堆if-else，条件来自线上配置数据，主要是预防某个新特性上线后，存在质量问题，放一定比例的量观测线上情况用的；但是，FG 容易写，但懒得维护，一旦写上就没人想着删掉，导致代码里出现了很多很多 if-else ，并且还很可能嵌套。

这是一个很简单的场景，人力可以维护，但比较繁琐，用 AI 反而很高效了。

怎么个自动删除？项目接入了大模型api调用的吗？

1. 先去平台上取数，看那些 FG key 已经全量或已经被删除；
2. 扫描仓库，用 [ag](https://github.com/ggreer/the_silver_searcher) 找到还在用这个 key 的代码文件；
3. 调用 coze api，让 LLM 删除这部分 IF-else 判断逻辑；
4. 自动提交代码，创建 PR，跑 CI，跑 test & build & ts check，看看有没有问题；
5. 人工 CR 通过后，合入

前面的1到4都做成自动化了，每天自动跑。最开始我们用 ts-morph（一个TypeScript AST工具） 做了一大堆判断，效果还不好，用 claude 之后，舒坦了。